<div id="sidebar">
  <div id="sidebar_wrapper">
    <table class="sidebar_title" width="100%">
      <tr>
        <td id="sidebar_title"><% t 'site.sidebar.search_results' %></td>
        <td id="sidebar_close"><a href="javascript:closeSidebar()"><%= t 'site.sidebar.close' %></a></td>
      </tr>
    </table>
    <div id="sidebar_content">
    </div>
  </div>
</div>

<script type="text/javascript">
<!--
  var onclose;

  function openSidebar(options) {
    options = options || {};

    if (onclose) {
       onclose();
       onclose = null;
    }

    if (options.title) { $("#sidebar_title").html(options.title); }

    var width = options.width || $("#sidebar").parent().width() * 0.3;

    $("#sidebar_wrapper").width(width - 5);

    <% if t('html.dir') == "ltr" -%>
    $("#sidebar").animate({ borderRightWidth: 5 }, {
    <% else -%>
    $("#sidebar").animate({ borderLeftWidth: 5 }, {
    <% end -%>
       duration: 100,
       step: function () { <%= resize %> },
       complete: function () { <%= resize %> }
    }).animate({ width: width - 5 }, {
       duration: 900,
       step: function () { <%= resize %> },
       complete: function () { <%= resize %> }
    });

    onclose = options.onclose;
  }

  function closeSidebar() {
    $("#sidebar").animate({ width: 0 }, {
       duration: 900,
       step: function () { <%= resize %> },
       complete: function () { <%= resize %> }
    <% if t('html.dir') == "ltr" -%>
    }).animate({ borderRightWidth: 0 }, {
    <% else -%>
    }).animate({ borderLeftWidth: 0 }, {
    <% end -%>
       duration: 100,
       step: function () { <%= resize %> },
       complete: function () { <%= resize %> }
    });

    if (onclose) {
       onclose();
       onclose = null;
    }
  }

  function updateSidebar(title, content) {
    $("#sidebar_title").html(title);
    $("#sidebar_content").html(content);
  }
// -->
</script>
